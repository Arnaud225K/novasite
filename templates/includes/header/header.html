{% load static %}
{% load catalog_tags %}


<header class="header">
    <div class="header__top">
        <div class="container">
            <div class="header__top-content">
                <button class="header__location" data-micromodal-trigger="city-modal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path fill="#228AED" d="M12 2a7 7 0 0 0-7 7c0 4.1 5.5 10.4 6.2 11.2a.8.8 0 0 0 1.2 0c.7-.8 6.2-7.1 6.2-11.2a7 7 0 0 0-7-7Zm0 15.6c-2.1-2.4-5-6.2-5-8.6a5 5 0 1 1 10 0c0 2.4-2.9 6.2-5 8.6Zm0-11.1a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Zm0 3a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1Z">
                        </path>
                    </svg>
                    <span>{{ current_filial.name|default:"Выбрать город" }}</span>
                </button>
                <div class="header__contacts">
                    <a class="header__contacts-email" href="mailto:{{ current_filial.email|default:'test@novator.ru'}}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path fill="#228AED" d="M20.4 5H3.6A1.6 1.6 0 0 0 2 6.6v10.8A1.6 1.6 0 0 0 3.6 19h16.8a1.6 1.6 0 0 0 1.6-1.6V6.6A1.6 1.6 0 0 0 20.4 5Zm-.3 1.2L12 12.1 3.9 6.2h16.2ZM3.2 17.2V7.1l8.3 6.1a.8.8 0 0 0 1 0l8.3-6.1v10.1H3.2Z">
                            </path>
                        </svg>
                        <span>{{ current_filial.email|default:'test@novator.ru' }}</span>
                    </a>
                    <div class="header__contacts-phones">
                        <a class="phone" href="tel:{{ current_filial.phone|default:'+7(999)999-99-99'|remove_space_href }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <path fill="#228AED" d="M19.2 16.8c-1.2 0-2.3-.2-3.4-.6a1 1 0 0 0-1 .2l-2.2 1.7a13.5 13.5 0 0 1-6.4-6.4l1.7-2.2a1 1 0 0 0 .2-1 10.7 10.7 0 0 1-.6-3.4A1.2 1.2 0 0 0 6.3 4H4.2A1.2 1.2 0 0 0 3 5.2c0 9.3 7.5 16.8 16.8 16.8a1.2 1.2 0 0 0 1.2-1.2v-2.1c0-.7-.5-1.2-1.2-1.2Z">
                                    </path>
                            </svg>
                            <span>{{ current_filial.phone|default:'+7(999)999-99-99' }}</span>
                        </a>
                        {% if current_filial.phone_dop %}
                            <a class="phone" href="tel:{{ current_filial.phone_dop|remove_space_href }}"><span>{{ current_filial.phone_dop }}</span></a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="header__bottom">
        <div class="container">
            <div class="header__bottom-content">
                <a class="header__logo" href="{% url 'menu:index' %}">
                    <picture>
                        <source srcset="{% static 'img/images/logo.webp' %} " media="(min-width: 992px)">
                        <img src="{% static 'img/icons/logo_small.svg' %}" alt="Логотип Новатор">
                    </picture>
                </a>
                <nav class="nav-mobile" data-micromodal-trigger="navigation">
                    <div class="nav-mobile__thumb">
                        <div class="line"> </div>
                        <div class="line"> </div>
                        <div class="line"> </div>
                    </div>
                    <div class="nav-mobile__text">Меню</div>
                </nav>
                <ul>
                    <li class="header__menu-item"><a class="header__menu-link subheader__catalog" href="/catalog/">Каталог</a></li>
                    <li class="header__menu-item"><a class="header__menu-link" href="/uslugi/">Услуги</a></li>
                    <li class="header__menu-item"><a class="header__menu-link" href="/o-nas/">О компании</a></li>
                    <li class="header__menu-item client">
                        <div class="header__menu-link">Клиенту</div>
                        <div class="header-menu-sm">
                            <div class="header-menu-sm__wrapper">
                                <div class="header-menu-sm__content">
                                    <div class="header-menu-sm__links">
                                        <a href="/dostavka-i-oplata/">Доставка и оплата</a>
                                        <a href="/articles/">Статьи</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="header__menu-item"><a class="header__menu-link" href="/contacts/">Контакты</a></li>
                </ul>
                <div class="header__actions">
                    <form action="{% url 'search:full_search' %}" method="get">
                        <input name="q" type="search" placeholder="Поиск по сайту" autocomplete="off">
                        <button class="search-close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M6 6L18 18M6 18L18 6" stroke="#BACADE" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            </svg>
                        </button>
                        <button class="search" type="submit"><img src="{% static 'img/icons/search.svg' %}" alt="Поиск"></button>
                    </form>

                    <div class="search-results-dropdown" id="live-search-results" style="display: none;">
                    </div>

                    <a class="cart" href="{% url 'checkout:checkout_page' %}">
                        <img src="{% static 'img/icons/cart.svg' %}" alt="Корзина">
                        <sup id="header-cart-count" 
                            class="dynamic-cart-counter {% if not cart_unique_items_count or cart_unique_items_count == 0 %}hidden{% endif %}">
                            {{ cart_unique_items_count|default:0 }}
                        </sup>
                    </a>
                    <button class="request-btn" data-micromodal-trigger="callback-modal">Заказать звонок</button>
                    <button class="mobile-request-btn" data-micromodal-trigger="callback-modal">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.0241 15.7779L15.5953 13.7932C15.3947 13.7073 15.1757 13.6727 14.9583 13.6927C14.7409 13.7126 14.532 13.7865 14.3503 13.9076C14.3319 13.9195 14.3144 13.9327 14.2978 13.947L11.9831 15.9157C11.9591 15.9288 11.9324 15.9362 
                                11.905 15.9371C11.8777 15.9381 11.8505 15.9327 11.8256 15.9214C10.3378 15.2032 8.79657 13.6714 8.07563 12.2042C8.06363 12.1797 8.05739 12.1527 8.05739 12.1254C8.05739 12.0981 8.06363 12.0712 8.07563 12.0467L10.0509 9.70293C10.0654 9.68577 
                                10.0785 9.6676 10.0903 9.64856C10.2097 9.46622 10.2819 9.25701 10.3002 9.03981C10.3185 8.82262 10.2825 8.60427 10.1953 8.4045L8.2247 3.98325C8.11279 3.72226 7.91925 3.5046 7.67313 3.36295C7.42701 3.22129 7.14159 3.16328 6.8597 3.19762C5.63468 
                                3.35887 4.51025 3.96056 3.69645 4.8903C2.88265 5.82003 2.43514 7.01422 2.43751 8.24981C2.43751 15.5904 8.40938 21.5623 15.75 21.5623C16.9856 21.5647 18.1798 21.1172 19.1095 20.3034C20.0393 19.4896 20.6409 18.3651 20.8022 17.1401C20.8365 16.8596 
                                20.7792 16.5754 20.639 16.33C20.4988 16.0845 20.2832 15.8909 20.0241 15.7779ZM15.75 20.4373C9.03001 20.4373 3.56251 14.9698 3.56251 8.24981C3.55938 7.28787 3.90658 6.35769 4.53924 5.63307C5.1719 4.90845 6.04675 4.43895 7.00032 4.31231H7.02188C7.05966 
                                4.31301 7.09635 4.32512 7.12713 4.34703C7.15791 4.36895 7.18135 4.39965 7.19438 4.43512L9.17251 8.85168C9.18379 8.87624 9.18963 8.90294 9.18963 8.92997C9.18963 8.95699 9.18379 8.98369 9.17251 9.00825L7.19345 11.3576C7.17875 11.3745 7.16528 11.3923 
                                7.15313 11.4111C7.0293 11.6001 6.95637 11.8179 6.94143 12.0434C6.92648 12.269 6.97002 12.4945 7.06782 12.6982C7.89938 14.4007 9.61501 16.1032 11.3363 16.9348C11.5412 17.0321 11.7678 17.0746 11.9941 17.0581C12.2203 17.0417 12.4385 16.9669 12.6272 
                                16.8411C12.645 16.8289 12.6628 16.8157 12.6797 16.8017L14.9934 14.8329C15.0163 14.8207 15.0415 14.8135 15.0674 14.8118C15.0933 14.8102 15.1192 14.8142 15.1434 14.8236L19.5731 16.8082C19.6093 16.8237 19.6397 16.8501 19.6601 16.8837C19.6805 16.9173 
                                19.6897 16.9565 19.6866 16.9957C19.5606 17.9498 19.0915 18.8253 18.3671 19.4586C17.6426 20.092 16.7123 20.4399 15.75 20.4373ZM13.6875 9.74981V5.99981C13.6875 5.85063 13.7468 5.70755 13.8523 5.60206C13.9578 5.49657 14.1008 5.43731 14.25 5.43731C14.3992 
                                5.43731 14.5423 5.49657 14.6478 5.60206C14.7532 5.70755 14.8125 5.85063 14.8125 5.99981V8.39137L18.3525 4.85231C18.4591 4.75295 18.6002 4.69886 18.7459 4.70143C18.8916 4.704 19.0307 4.76303 19.1337 4.86609C19.2368 4.96915 19.2958 5.10819 19.2984 
                                5.25392C19.301 5.39964 19.2469 5.54068 19.1475 5.64731L15.6075 9.18731H18C18.1492 9.18731 18.2923 9.24657 18.3978 9.35206C18.5032 9.45755 18.5625 9.60063 18.5625 9.74981C18.5625 9.89899 18.5032 10.0421 18.3978 10.1476C18.2923 10.253 18.1492 10.3123 
                                18 10.3123H14.25C14.1008 10.3123 13.9578 10.253 13.8523 10.1476C13.7468 10.0421 13.6875 9.89899 13.6875 9.74981Z"
                                fill="#21488B">
                            </path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="header-menu" data-menu-loaded="false">
            <div class="loading-placeholder">Загрузка меню...</div>
        </div>
    </div>
</header>